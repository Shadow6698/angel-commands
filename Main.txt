local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local prefix = ";"
local originalCameraSubject = Camera.CameraSubject

-- Atualiza refer√™ncia do Humanoid para a c√¢mera
local function updateOriginalCameraSubject()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        originalCameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    end
end

updateOriginalCameraSubject()
LocalPlayer.CharacterAdded:Connect(function()
    wait(1)
    updateOriginalCameraSubject()
end)

-- Tela dos comandos (GUI)
local function showCommandsGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ComandosInfoGui"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = PlayerGui

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(0.5, 0, 0.4, 0)
    textLabel.Position = UDim2.new(0.25, 0, 0.3, 0)
    textLabel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    textLabel.BackgroundTransparency = 0.3
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    textLabel.TextScaled = true
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextWrapped = true
    textLabel.Text = [[
üî• Comandos dispon√≠veis üî•

;tp [nick] - Teleporta at√© o jogador
;tpsofa - Teleporta para o sof√°
;speed [n] - Define sua velocidade
;jumppower [n] - Define seu pulo
;view [nick] - Ver c√¢mera do jogador
;unview - Voltar para sua vis√£o
;xray - Ver atrav√©s das paredes
;unxray - Desativa o xray
;coolkidhub - Ativa o COOLKIDHUB
;portalgun - Ativa a Portal Gun
]]
    textLabel.Parent = screenGui

    delay(8, function()
        screenGui:Destroy()
    end)
end

showCommandsGui()

-- Xray sistema
local xrayParts = {}

local function enableXray()
    xrayParts = {}
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and part.Transparency < 1 then
            table.insert(xrayParts, {part = part, transparency = part.Transparency})
            part.Transparency = 0.7
        end
    end
end

local function disableXray()
    for _, data in pairs(xrayParts) do
        if data.part and data.part.Parent then
            data.part.Transparency = data.transparency
        end
    end
    xrayParts = {}
end

-- Sistema de comandos pelo chat
LocalPlayer.Chatted:Connect(function(msg)
    if msg:sub(1, #prefix) == prefix then
        local args = string.split(msg, " ")
        local command = string.lower(string.sub(args[1], #prefix + 1))

        -- ;tp [nick]
        if command == "tp" and args[2] then
            local target = Players:FindFirstChild(args[2])
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character:MoveTo(target.Character.HumanoidRootPart.Position)
            else
                warn("Jogador n√£o encontrado ou sem personagem.")
            end

        -- ;tpsofa
        elseif command == "tpsofa" then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-83, 21, -131)
            else
                warn("Personagem n√£o encontrado.")
            end

        -- ;speed [n]
        elseif command == "speed" and args[2] then
            local speed = tonumber(args[2])
            if speed and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = speed
            else
                warn("Valor inv√°lido para velocidade.")
            end

        -- ;jumppower [n]
        elseif command == "jumppower" and args[2] then
            local jp = tonumber(args[2])
            if jp and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = jp
            else
                warn("Valor inv√°lido para JumpPower.")
            end

        -- ;view [nick]
        elseif command == "view" and args[2] then
            local target = Players:FindFirstChild(args[2])
            if target and target.Character and target.Character:FindFirstChildOfClass("Humanoid") then
                Camera.CameraSubject = target.Character:FindFirstChildOfClass("Humanoid")
            else
                warn("Jogador para view n√£o encontrado ou sem personagem.")
            end

        -- ;unview
        elseif command == "unview" then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                Camera.CameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            else
                Camera.CameraSubject = originalCameraSubject
            end

        -- ;xray
        elseif command == "xray" then
            enableXray()

        -- ;unxray
        elseif command == "unxray" then
            disableXray()

        -- ;coolkidhub
        elseif command == "coolkidhub" then
            local success, err = pcall(function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/COOLKIDHUB/main/Main.txt"))()
            end)
            if not success then
                warn("Erro ao executar COOLKIDHUB:", err)
            end

        -- ;portalgun
        elseif command == "portalgun" then
            local success, err = pcall(function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/Portal-gun-/main/Main.txt"))()
            end)
            if not success then
                warn("Erro ao executar PortalGun:", err)
            end
        end
    end
end)
