local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local prefix = ";"
local originalCameraSubject = Camera.CameraSubject
local xrayParts = {}

-- Esperar personagem
local function WaitForCharacter()
    if not LocalPlayer.Character or not LocalPlayer.Character.Parent then
        LocalPlayer.CharacterAdded:Wait()
    end
    repeat task.wait() until LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
end

-- Atualizar camera subject
local function updateOriginalCameraSubject()
    WaitForCharacter()
    originalCameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
end
updateOriginalCameraSubject()

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    updateOriginalCameraSubject()
end)

-- Busca de jogador por nome ou display parcial
local function FindPlayer(name)
    name = string.lower(name)
    for _, player in ipairs(Players:GetPlayers()) do
        if string.find(string.lower(player.Name), name) or string.find(string.lower(player.DisplayName), name) then
            return player
        end
    end
    return nil
end

-- GUI com comandos
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local function showCommandsGui()
    local screenGui = Instance.new("ScreenGui", PlayerGui)
    screenGui.Name = "ComandosInfoGui"
    screenGui.ResetOnSpawn = false

    local textLabel = Instance.new("TextLabel", screenGui)
    textLabel.Size = UDim2.new(0.5, 0, 0.4, 0)
    textLabel.Position = UDim2.new(0.25, 0, 0.3, 0)
    textLabel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    textLabel.BackgroundTransparency = 0.3
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    textLabel.TextScaled = true
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextWrapped = true
    textLabel.Text = [[
ðŸ”¥ Comandos disponÃ­veis ðŸ”¥

;tp [nick] â†’ Teleporta atÃ© o jogador
;tpsofa â†’ Vai pro sofÃ¡ secreto
;speed [nÃºmero] â†’ Muda sua velocidade
;jumppower [nÃºmero] â†’ Muda seu pulo
;view [nick] â†’ Ver cÃ¢mera do jogador
;unview â†’ Voltar pra sua visÃ£o
;xray â†’ Ver atravÃ©s das paredes
;unxray â†’ Desativa o xray
;coolkid â†’ Ativa o COOLKID HUB
;portalgun â†’ Ativa a Portal Gun
;void â†’ Ativa o Void FE
;gravitygun â†’ Ativa a Gravity Gun
;angelhub â†’ Ativa o Angel Hub
]]

    task.delay(8, function()
        screenGui:Destroy()
    end)
end

showCommandsGui()

-- Xray
local function enableXray()
    xrayParts = {}
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and part.Transparency < 1 and part.CanCollide then
            table.insert(xrayParts, {part = part, transparency = part.Transparency})
            part.Transparency = 0.7
        end
    end
end

local function disableXray()
    for _, data in pairs(xrayParts) do
        if data.part and data.part.Parent then
            data.part.Transparency = data.transparency
        end
    end
    xrayParts = {}
end

-- Comandos
LocalPlayer.Chatted:Connect(function(msg)
    if msg:sub(1, #prefix) == prefix then
        local args = string.split(msg, " ")
        local command = string.lower(string.sub(args[1], #prefix + 1))

        WaitForCharacter()

        if command == "tp" and args[2] then
            local target = FindPlayer(args[2])
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character:MoveTo(target.Character.HumanoidRootPart.Position)
            else
                warn("Jogador nÃ£o encontrado.")
            end

        elseif command == "tpsofa" then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-83, 21, -131)
            end

        elseif command == "speed" and args[2] then
            local speed = tonumber(args[2])
            if speed and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = speed
            end

        elseif command == "jumppower" and args[2] then
            local jp = tonumber(args[2])
            if jp and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = jp
            end

        elseif command == "view" and args[2] then
            local target = FindPlayer(args[2])
            if target and target.Character and target.Character:FindFirstChildOfClass("Humanoid") then
                Camera.CameraSubject = target.Character:FindFirstChildOfClass("Humanoid")
            else
                warn("Jogador nÃ£o encontrado para view.")
            end

        elseif command == "unview" then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                Camera.CameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            else
                Camera.CameraSubject = originalCameraSubject
            end

        elseif command == "xray" then
            enableXray()

        elseif command == "unxray" then
            disableXray()

        elseif command == "coolkid" then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/COOLKIDHUB/main/Main.txt"))()

        elseif command == "portalgun" then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/Portal-gun-/main/Main.txt"))()

        elseif command == "void" then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/Void-fe/main/main.txt"))()

        elseif command == "gravitygun" then
            loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-Telekinesis-12332"))()

        elseif command == "angelhub" then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/angelhub/main/Main.txt"))()
        end
    end
end)
