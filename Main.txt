local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local prefix = ";"
local originalCameraSubject = Camera.CameraSubject

-- Tela dos comandos
local function showCommandsGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ComandosInfoGui"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = PlayerGui

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(0.5, 0, 0.3, 0)
    textLabel.Position = UDim2.new(0.25, 0, 0.35, 0)
    textLabel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    textLabel.BackgroundTransparency = 0.3
    textLabel.TextColor3 = Color3.new(1,1,1)
    textLabel.TextScaled = true
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextWrapped = true
    textLabel.Text = [[
Comandos disponíveis:

;tp [nick] - Teleporta até o jogador
;speed [n] - Define velocidade
;jumppower [n] - Define pulo
;view [nick] - Ver câmera do jogador
;unview - Voltar câmera normal
;xray - Ver através das paredes
;unxray - Voltar visão normal
;coolkidhub - Executa o COOLKIDHUB
]]
    textLabel.Parent = screenGui

    delay(8, function()
        screenGui:Destroy()
    end)
end

showCommandsGui()

-- Para armazenar transparências para reverter depois (xray)
local xrayParts = {}

local function enableXray()
    xrayParts = {}
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and part.Transparency < 1 then
            table.insert(xrayParts, {part = part, transparency = part.Transparency})
            part.Transparency = 0.7
        end
    end
end

local function disableXray()
    for _, data in pairs(xrayParts) do
        if data.part and data.part.Parent then
            data.part.Transparency = data.transparency
        end
    end
    xrayParts = {}
end

LocalPlayer.Chatted:Connect(function(msg)
    if msg:sub(1, #prefix) == prefix then
        local args = string.split(msg, " ")
        local command = string.lower(string.sub(args[1], #prefix + 1))

        if command == "tp" and args[2] then
            local target = Players:FindFirstChild(args[2])
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character:MoveTo(target.Character.HumanoidRootPart.Position)
            else
                warn("Jogador não encontrado ou sem personagem.")
            end

        elseif command == "speed" and args[2] then
            local speed = tonumber(args[2])
            if speed and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = speed
            else
                warn("Valor inválido para velocidade.")
            end

        elseif command == "jumppower" and args[2] then
            local jp = tonumber(args[2])
            if jp and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = jp
            else
                warn("Valor inválido para JumpPower.")
            end

        elseif command == "view" and args[2] then
            local target = Players:FindFirstChild(args[2])
            if target and target.Character and target.Character:FindFirstChildOfClass("Humanoid") then
                Camera.CameraSubject = target.Character:FindFirstChildOfClass("Humanoid")
            else
                warn("Jogador para view não encontrado ou sem personagem.")
            end

        elseif command == "unview" then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                Camera.CameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            else
                Camera.CameraSubject = originalCameraSubject
            end

        elseif command == "xray" then
            enableXray()

        elseif command == "unxray" then
            disableXray()

        elseif command == "coolkidhub" then
            local success, err = pcall(function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/COOLKIDHUB/main/Main.txt"))()
            end)
            if not success then
                warn("Erro ao executar COOLKIDHUB:", err)
            end
        end
    end
end)
